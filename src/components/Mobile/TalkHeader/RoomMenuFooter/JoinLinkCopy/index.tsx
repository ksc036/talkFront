import React from 'react';

import { useShell } from '@shell/sdk';
import { RoomModel, useCoreStore } from '@wapl/core';
import { observer } from 'mobx-react-lite';

import { useStore } from '@/stores';

import * as S from './styled';

const JoinLinkCopy = observer(() => {
  const { roomStore } = useCoreStore();
  const { uiStore, configStore } = useStore();

  const handleClickCopy = async () => {
    const shell = useShell();
    const room = roomStore.getRoomById(
      roomStore.currentRoomId as number,
    ) as RoomModel;
    const link = `${location.origin}/invite/${room.id}`;

    try {
      const res = await shell.mobile.clipboard.write({
        string: link,
      });

      if (res) {
        uiStore.openToast(
          `${configStore.FeatureNameType.Room} 링크가 복사되었습니다.`,
        );
      }
    } catch (error) {
      console.log(error);
    }
  };

  return (
    <S.Wrapper onClick={handleClickCopy}>
      <S.CopyIcon>
        <svg
          width="36"
          height="36"
          viewBox="0 0 36 36"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M1.00041 9.08413C1.91528 5.0587 5.0587 1.91528 9.08413 1.00041C14.9532 -0.33347 21.0468 -0.33347 26.9159 1.00041C30.9413 1.91528 34.0847 5.0587 34.9996 9.08413C36.3335 14.9532 36.3335 21.0468 34.9996 26.9159C34.0847 30.9413 30.9413 34.0847 26.9159 34.9996C21.0468 36.3335 14.9532 36.3335 9.08413 34.9996C5.0587 34.0847 1.91528 30.9413 1.00041 26.9159C-0.33347 21.0468 -0.33347 14.9532 1.00041 9.08413Z"
            fill="#F1F3F4"
          />
          <path
            d="M1.24419 9.13953C2.13775 5.20791 5.20791 2.13775 9.13954 1.24419C14.9721 -0.0813981 21.0279 -0.081398 26.8605 1.24419C30.7921 2.13775 33.8623 5.20791 34.7558 9.13953C36.0814 14.9721 36.0814 21.0279 34.7558 26.8605C33.8623 30.7921 30.7921 33.8622 26.8605 34.7558C21.0279 36.0814 14.9721 36.0814 9.13954 34.7558C5.20791 33.8622 2.13775 30.7921 1.24419 26.8605C-0.0813982 21.0279 -0.0813981 14.9721 1.24419 9.13953Z"
            stroke="black"
            strokeOpacity="0.1"
            strokeWidth="0.5"
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M21.3312 10.6877C20.2769 10.6784 19.262 11.0866 18.5047 11.8231L17.3109 13.0182C17.0913 13.238 17.0915 13.5942 17.3113 13.8137C17.5311 14.0333 17.8873 14.0331 18.1068 13.8133L19.2919 12.6268C19.8372 12.0979 20.5658 11.806 21.3214 11.8126C22.0782 11.8192 22.803 12.1249 23.3393 12.665C23.8758 13.2053 24.1808 13.9369 24.1874 14.7026C24.194 15.4667 23.9029 16.2022 23.3778 16.7514L21.3091 18.8346C21.0158 19.1301 20.6631 19.3583 20.275 19.5041C19.8869 19.6499 19.4724 19.7099 19.0594 19.6801C18.6465 19.6503 18.2446 19.5314 17.8809 19.3313C17.5172 19.1313 17.2002 18.8546 16.9516 18.5199C16.7663 18.2705 16.414 18.2185 16.1646 18.4037C15.9152 18.589 15.8632 18.9413 16.0485 19.1907C16.3931 19.6547 16.8331 20.0389 17.3386 20.317C17.8442 20.5952 18.4035 20.7607 18.9785 20.8022C19.5535 20.8436 20.1306 20.7601 20.6706 20.5572C21.2105 20.3544 21.7005 20.0371 22.1075 19.6272L24.1797 17.5405L24.1865 17.5335C24.9176 16.7712 25.3215 15.751 25.3124 14.6929C25.3033 13.6347 24.8818 12.6217 24.1376 11.8723C23.3933 11.1228 22.3855 10.6969 21.3312 10.6877ZM17.0215 15.1978C16.4465 15.1564 15.8694 15.2399 15.3295 15.4428C14.7895 15.6456 14.2995 15.9629 13.8925 16.3728L11.8203 18.4595L11.8135 18.4665C11.0824 19.2288 10.6785 20.249 10.6877 21.3071C10.6968 22.3653 11.1182 23.3783 11.8624 24.1277C12.6068 24.8772 13.6145 25.3031 14.6688 25.3123C15.7231 25.3216 16.7381 24.9135 17.4953 24.177L18.6834 22.9806C18.9023 22.7602 18.9011 22.404 18.6806 22.1851C18.4602 21.9662 18.104 21.9674 17.8851 22.1879L16.7076 23.3737C16.1624 23.9023 15.4339 24.194 14.6787 24.1874C13.9218 24.1808 13.1971 23.8751 12.6607 23.335C12.1242 22.7947 11.8192 22.0631 11.8126 21.2974C11.806 20.5333 12.0971 19.7979 12.6222 19.2486L14.691 17.1654C14.9843 16.8699 15.337 16.6417 15.7251 16.4959C16.1131 16.3501 16.5277 16.2901 16.9406 16.3199C17.3536 16.3497 17.7555 16.4686 18.1191 16.6687C18.4828 16.8687 18.7998 17.1454 19.0484 17.4801C19.2337 17.7295 19.586 17.7815 19.8354 17.5963C20.0848 17.411 20.1368 17.0587 19.9516 16.8093C19.6069 16.3453 19.167 15.9611 18.6614 15.683C18.1558 15.4048 17.5966 15.2393 17.0215 15.1978Z"
            fill="#067DFD"
          />
        </svg>
      </S.CopyIcon>
      <S.RoomMenuText>{'참여 링크 복사'}</S.RoomMenuText>
    </S.Wrapper>
  );
});

export default JoinLinkCopy;
